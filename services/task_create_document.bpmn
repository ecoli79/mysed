<?xml version="1.0" encoding="UTF-8"?>
<definitions
    xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
    xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
    xmlns:camunda="http://camunda.org/schema/1.0/bpmn"
    xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL
                        http://www.omg.org/spec/BPMN/2.0/20100501/BPMN20.xsd"
    id="Definitions_1"
    targetNamespace="http://bpmn.io/schema/bpmn"
    exporter="bpmn-io" exporterVersion="17.0.0">

  <!-- Процесс -->
  <process 
      id="prepareDocumentProcess" 
      name="Подготовить документ" 
      isExecutable="true"
      camunda:assignee="${assignee}"
      camunda:historyTimeToLive="30">  <!-- Добавлено: TTL -->

    <!-- documentation ВНУТРИ process и ДО startEvent -->
    <documentation>
      <![CDATA[
      Процесс предназначен для назначения задачи пользователю на подготовку документа.
      Пользователь должен создать файл и загрузить его при завершении задачи.
      Примеры: отчёт, презентация, техническое задание, служебная записка и т.д.
      ]]>
    </documentation>

    <!-- Стартовое событие -->
    <startEvent id="StartEvent_1" name="Начало" />
    
    <!-- Пользовательская задача -->
    <userTask 
        id="prepareTask" 
        name="Подготовить документ" 
        camunda:formKey="embedded:app:forms/prepare-document-form.html" />

    <!-- Конечное событие -->
    <endEvent id="EndEvent_1" name="Конец" />

    <!-- Потоки выполнения -->
    <sequenceFlow id="Flow_1" sourceRef="StartEvent_1" targetRef="prepareTask" />
    <sequenceFlow id="Flow_2" sourceRef="prepareTask" targetRef="EndEvent_1" />

  </process>

  <!-- Диаграмма -->
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="prepareDocumentProcess">
      
      <bpmndi:BPMNShape id="StartEvent_1_di" bpmnElement="StartEvent_1">
        <omgdc:Bounds x="179" y="109" width="36" height="36" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="UserTask_1_di" bpmnElement="prepareTask">
        <omgdc:Bounds x="250" y="90" width="100" height="80" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNShape id="EndEvent_1_di" bpmnElement="EndEvent_1">
        <omgdc:Bounds x="390" y="109" width="36" height="36" />
      </bpmndi:BPMNShape>

      <bpmndi:BPMNEdge id="Flow_1_di" bpmnElement="Flow_1">
        <omgdi:waypoint x="215" y="127" />
        <omgdi:waypoint x="250" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_2_di" bpmnElement="Flow_2">
        <omgdi:waypoint x="350" y="130" />
        <omgdi:waypoint x="390" y="127" />
      </bpmndi:BPMNEdge>

    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>

</definitions>
